/*! rainbow.js 0.0.2, 2013-08-01
 *  https://github.com/buunguyen/rainbow.js
 *  Copyright (c) 2013 Buu Nguyen
 *  Licensed under the Apache License, Version 2.0 */
!function(window,document){!function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=(new Date).getTime(),d=Math.max(0,16-(c-a)),e=window.setTimeout(function(){b(c+d)},d);return a=c+d,e}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}();var canvas,timerId,currentProgress,showing,addEvent=function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):a["on"+b]=c},options={lineThickness:5,circleRadius:5,autoRun:!0,lineColors:{0:"rgba(26,  188, 156, .5)",".25":"rgba(52,  152, 219, .5)",".50":"rgba(241, 196, 15,  .5)",".75":"rgba(230, 126, 34,  .5)","1.0":"rgba(211, 84,  0,   .5)"},circleColors:{0:"rgba(230, 126, 34, .9)","1.0":"rgba(241, 196, 15, .9)"}},repaint=function(){canvas.width=window.innerWidth,canvas.height=Math.max(options.lineThickness,2*options.circleRadius);var a=canvas.getContext("2d"),b={x:Math.ceil(currentProgress*canvas.width),y:canvas.height/2};if(a.clearRect(0,0,canvas.width,canvas.height),options.lineThickness>0){var c=a.createLinearGradient(0,0,canvas.width,0);for(var d in options.lineColors)c.addColorStop(d,options.lineColors[d]);a.lineWidth=options.lineThickness,a.beginPath(),a.moveTo(0,b.y),a.lineTo(b.x,b.y),a.strokeStyle=c,a.stroke()}if(options.circleRadius>0){var e=a.createRadialGradient(b.x,b.y,0,b.x,b.y,options.circleRadius);for(var d in options.circleColors)e.addColorStop(d,options.circleColors[d]);a.fillStyle=e,a.arc(b.x,b.y,options.circleRadius,0,2*Math.PI,!1),a.fill()}},createCanvas=function(){canvas=document.createElement("canvas");var a=canvas.style;a.position="fixed",a.top=a.left=0,a["z-index"]=100001,a.display="none",document.body.appendChild(canvas),addEvent(window,"resize",repaint)},rainbow={config:function(a){for(var b in a)options.hasOwnProperty(b)&&(options[b]=a[b])},show:function(){showing||(showing=!0,canvas||createCanvas(),currentProgress=0,canvas.style.display="block",repaint(),options.autoRun&&function a(){timerId=window.requestAnimationFrame(a),rainbow.progress("+"+.05*Math.pow(1-Math.sqrt(currentProgress),2))}())},progress:function(to){return"undefined"!=typeof to&&showing?("string"==typeof to&&(to=-1!==to.indexOf("+")||-1!==to.indexOf("-")?eval("currentProgress"+to):parseFloat(to)),currentProgress=to>1?1:to,repaint(),currentProgress):currentProgress},hide:function(){showing&&(showing=!1,canvas.style.display="none",null!=timerId&&(window.cancelAnimationFrame(timerId),timerId=null))}};"object"==typeof exports?module.exports=rainbow:"function"==typeof define&&define.amd?define(function(){return rainbow}):this.rainbow=rainbow}.call(this,window,document);